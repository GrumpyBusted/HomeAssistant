###############################################################################
# Smart-Me Kamstrup Omnipower Meter
###############################################################################

rest:
  - resource: https://api.smart-me.com/DeviceBySerial?serial=9203930
    method: GET
    authentication: basic
    username: !secret smartme_username
    password: !secret smartme_password
    timeout: 10
    scan_interval: 600
    sensor:
      - name: "Smart-Me Kamstrup Omnipower Meter"
        unique_id: 64310A37-5562-4207-B4BD-8FC21E4DF551
        unit_of_measurement: "kWh"
        device_class: "energy"
        state_class: "total_increasing"
        value_template: "{{ value_json.CounterReading | round(2) }}"
        json_attributes:
          - "Name"
          - "Serial"
          - "ActivePower"
          - "ActivePowerUnit"
          - "CounterReading"
          - "CounterReadingUnit"
          - "CounterReadingImport"
          - "CounterReadingExport"
          - "ValueDate"
